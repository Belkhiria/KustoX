{"version":3,"file":"clientRequestProperties.js","sourceRoot":"","sources":["../../src/clientRequestProperties.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\n\nimport { KustoHeaders } from \"./clientDetails\";\n\nexport class ClientRequestProperties {\n    private _options: { [option: string]: any };\n    private _parameters: { [option: string]: any };\n    private _clientTimeOut?: number;\n    public clientRequestId: string | null;\n    public user: string | null;\n    public application: string | null;\n    public raw?: boolean;\n\n    constructor(options?: Record<string, unknown>, parameters?: Record<string, unknown>, clientRequestId?: string, user?: string, application?: string) {\n        this._options = options || {};\n        this._parameters = parameters || {};\n        this.clientRequestId = clientRequestId || null;\n        this.user = user || null;\n        this.application = application || null;\n    }\n\n    setOption(name: string, value: any) {\n        this._options[name] = value;\n    }\n\n    getOption(name: string, defaultValue?: any) {\n        if (!this._options || this._options[name] === undefined) return defaultValue;\n\n        return this._options[name];\n    }\n\n    setParameter(name: string, value: any) {\n        this._parameters[name] = value;\n    }\n\n    getParameter(name: string, defaultValue?: any) {\n        if (!this._parameters || this._parameters[name] === undefined) {\n            return defaultValue;\n        }\n\n        return this._parameters[name];\n    }\n\n    clearParameters() {\n        this._parameters = {};\n    }\n\n    setTimeout(timeoutMillis: number) {\n        this.setOption(\"servertimeout\", timeoutMillis);\n    }\n\n    getTimeout(): number | undefined {\n        return this.getOption(\"servertimeout\");\n    }\n\n    setClientTimeout(timeoutMillis: number) {\n        this._clientTimeOut = timeoutMillis;\n    }\n\n    getClientTimeout() {\n        return this._clientTimeOut;\n    }\n\n    clearOptions() {\n        this._options = {};\n    }\n\n    /**\n     * @deprecated use the compliant toJSON() instead\n     */\n    toJson() {\n        return this.toJSON();\n    }\n\n    toJSON() {\n        const json: {\n            Options?: { [option: string]: any };\n            Parameters?: { [option: string]: any };\n        } = {};\n\n        if (Object.keys(this._options).length !== 0) {\n            json.Options = { ...this._options };\n            if (json.Options.servertimeout) {\n                json.Options.servertimeout = this._msToTimespan(json.Options.servertimeout as number);\n            }\n        }\n\n        if (Object.keys(this._parameters).length !== 0) {\n            json.Parameters = { ...this._parameters };\n        }\n\n        return Object.keys(json).length !== 0 ? json : null;\n    }\n\n    toString() {\n        return JSON.stringify(this.toJSON());\n    }\n\n    _msToTimespan(duration: number): string {\n        const milliseconds = Math.floor((duration % 1000) / 100);\n        const seconds = Math.floor((duration / 1000) % 60);\n        const minutes = Math.floor((duration / (1000 * 60)) % 60);\n        const hours = Math.floor((duration / (1000 * 60 * 60)) % 24);\n\n        const hoursStr = hours < 10 ? `0${hours}` : String(hours);\n        const minutesStr = minutes < 10 ? `0${minutes}` : String(minutes);\n        const secondsStr = seconds < 10 ? `0${seconds}` : String(seconds);\n\n        return `${hoursStr}:${minutesStr}:${secondsStr}.${milliseconds}`;\n    }\n\n    getHeaders(): Partial<KustoHeaders> {\n        const headers: Partial<KustoHeaders> = {};\n        if (this.clientRequestId) {\n            headers[\"x-ms-client-request-id\"] = this.clientRequestId;\n        }\n        if (this.user) {\n            headers[\"x-ms-user\"] = this.user;\n        }\n        if (this.application) {\n            headers[\"x-ms-app\"] = this.application;\n        }\n        return headers;\n    }\n}\n\nexport default ClientRequestProperties;\n"]}