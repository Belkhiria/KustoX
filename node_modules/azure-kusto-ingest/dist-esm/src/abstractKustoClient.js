"use strict";
// Copyright (c) Microsoft Corporation.
// Licensed under the MIT License.
Object.defineProperty(exports, "__esModule", { value: true });
exports.AbstractKustoClient = void 0;
const ingestionProperties_1 = require("./ingestionProperties");
class AbstractKustoClient {
    constructor(defaultProps) {
        this._isClosed = false;
        if (!defaultProps) {
            this.defaultProps = new ingestionProperties_1.IngestionProperties({});
        }
        else if (!(defaultProps instanceof ingestionProperties_1.IngestionProperties)) {
            this.defaultProps = new ingestionProperties_1.IngestionProperties(defaultProps);
        }
        else {
            this.defaultProps = new ingestionProperties_1.IngestionProperties(defaultProps);
        }
    }
    _getMergedProps(newProperties) {
        const props = this.defaultProps.merge(newProperties);
        props.setDefaults();
        if (!props.database) {
            props.database = this.defaultDatabase;
        }
        props.validate();
        return props;
    }
    close() {
        this._isClosed = true;
    }
    ensureOpen() {
        if (this._isClosed) {
            throw new Error("Client is closed");
        }
    }
}
exports.AbstractKustoClient = AbstractKustoClient;
//# sourceMappingURL=abstractKustoClient.js.map